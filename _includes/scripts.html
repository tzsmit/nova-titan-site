<!-- JavaScript Libraries & Scripts -->

<!-- 1. Vendor Libraries (Load First with defer) -->
<script defer src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

<!-- 2. Particle.js Configuration -->
<script>
  // Initialize Particles
  if (typeof particlesJS !== 'undefined') {
    particlesJS('particles-js', {
      particles: { 
        number: { value: 80, density: { enable: true, value_area: 1000 } },
        color: { value: ['#00d4ff', '#00ff88', '#b300ff', '#ff0066'] }, 
        shape: { type: 'circle' },
        opacity: { value: .3, random: true }, 
        size: { value: 3, random: true },
        line_linked: { enable: true, distance: 120, color: '#00d4ff', opacity: .25, width: 1 },
        move: { enable: true, speed: 1.8, direction: 'none', random: false, straight: false, out_mode: 'out', bounce: false } 
      },
      interactivity: { 
        detect_on: 'canvas',
        events: { onhover: { enable: true, mode: 'repulse' }, onclick: { enable: true, mode: 'push' } }, 
        modes: { repulse: { distance: 80, duration: 0.4 }, push: { particles_nb: 3 } } 
      },
      retina_detect: true
    });
  }
</script>

<!-- 3. GSAP Animations -->
<script defer>
  // Wait for all scripts to load before initializing
  window.addEventListener('load', function() {
    // Initialize GSAP animations
    if (typeof gsap !== 'undefined' && typeof ScrollTrigger !== 'undefined') {
      gsap.registerPlugin(ScrollTrigger);
      
      // Card animations
      const cards = document.querySelectorAll('.card');
      if (cards.length > 0) {
        gsap.from('.card', {
          opacity: 0,
          y: 30,
          stagger: 0.08,
          duration: 0.7,
          delay: 0.2,
          ease: "power2.out"
        });
      }

      // Fade-in elements with ScrollTrigger
      const fadeElements = document.querySelectorAll('.fade-in');
      if (fadeElements.length > 0) {
        fadeElements.forEach(el => {
          gsap.from(el, {
            opacity: 0,
            y: 20,
            duration: 0.6,
            ease: "power2.out",
            scrollTrigger: {
              trigger: el,
              start: "top 80%",
              once: true
            }
          });
        });
      }
    }
  });
</script>

<!-- 4. Navigation Script (Must load after GSAP/Particles) -->
<script defer src="/assets/js/nav.js"></script>

<!-- 5. Page-specific scripts -->
{% if page.extra_scripts %}
  {{ page.extra_scripts }}
{% endif %}

<!-- 6. Console Branding -->
<script>
  console.log('%cüõ°Ô∏è {{ site.title }}', 'color: #b300ff; font-size: 18px; font-weight: bold;');
  console.log('%cIT Consulting ¬∑ Network Security ¬∑ Managed Support', 'color: #00d4ff; font-size: 14px;');
  console.log('%cServing Lubbock & West Texas ¬∑ Remote Services Nationwide', 'color: #00ff88; font-size: 12px;');
</script>
